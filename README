DistroKit
---------

This is the main repository for DistroKit, an Embedded Linux Board
Support Package (BSP) for the PTXdist [1] Build System.

The main task for PTXdist is to build a root filesystem and a flash
image for the embedded system. PTXdist has a concept of separating the
software configuration from the hardware platforms, so the first
decision to be made is to select for which hardware DistroKit shall be
built.


Installing PTXdist
------------------

DistroKit is built with ptxdist. In order to install ptxdist, download
the tarball from [2]:

$ wget \
  http://www.pengutronix.de/software/ptxdist/download/ptxdist-2016.10.0.tar.bz2

Extract the tarball:

$ tar xf ptxdist-2016.10.0 && cd ptxdist-2016.10.0

Go to the extracted directory and run

$ ./configure && make && sudo make install


Selecting the Platform
----------------------

For the different hardware platforms, see the instructions about

- how to install the toolchain
- how to select the right platform
- how to build the rootfs

in README.<platform>.

In order to build a BSP, you need a toolchain. The easiest way to get a
toolchain is to install the debian packages for OSELAS.Toolchain:

  http://www.pengutronix.de/oselas/toolchain/

If you want to build the toolchain yourself, you can download the
toolchain sources from

  http://www.pengutronix.de/oselas/toolchain/download/

and build them manually.

The needed toolchain for Rasperry Pi 2/3 builds is 
OSELAS.Toolchain-2016.06.0/arm-v7a-linux-gnueabihf/gcc-5.4.0-glibc-2.23-binutils-2.26-kernel-4.6-sanitized

Debian Toolchains are available at (/etc/apt/sources.list)
deb http://debian.pengutronix.de/debian/ sid main contrib non-free

To install use:
apt update
apt install oselas.toolchain-2016.06.0-arm-v7a-linux-gnueabihf-gcc-5.4.0-glibc-2.23-binutils-2.26-kernel-4.6-sanitized

Building DistroKit
------------------

Now everything is prepared to build the BSP:

$ ptxdist platform configs/platform-rpi2/platformconfig
$ ptxdist images

PTXdist determines the number of CPUs on your computer and runs the
compiler with <twice the number of CPUs> instances in parallel.
Nevertheless, building a root filesystem from the sources needs some
time.


References
----------

[1] PTXdist
    http://www.pengutronix.de/software/ptxdist/

[2] PTXdist Download Area
    http://www.pengutronix.de/software/ptxdist/download/

